"soft-dirty" - установлен, если страница была изменена, но не была записана обратно на диск.

"swapped" - установлен, если страница была выгружена на диск, чтобы освободить физическую память.

"present" - установлен, если страница присутствует в физической памяти.

Файл - объект файловой или операционной системы, который реализует файловый интерфейс (реализует подмножество file operations)


/////////////////////////////////////////////////////////
Конкретно бит 61 обозначает тип страницы следующим образом:

Если бит 61 равен 0, то это обычная анонимная страница (приватная страница, содержимое которой не общее для нескольких процессов).
Если бит 61 равен 1, то это либо файловая страница (т.е. содержимое страницы хранится в файле на диске), либо разделяемая анонимная страница (т.е. содержимое страницы общее для нескольких процессов и хранится в оперативной памяти).

В pagemap бит 56 ("page exclusively mapped") отвечает за то, используется ли данная страница исключительно в рамках одного процесса (или, точнее, одного контекста выполнения). Это означает, что когда процесс использует эту страницу, она не может быть использована другим процессом или ядром.

/////////
Bit 55: Если установлен, это означает, что страница была изменена, но изменения еще не записаны на диск. Этот бит используется для отслеживания "мягкого" (soft) изменения страницы.

Bit 56: Если установлен, это означает, что страница имеет эксклюзивное отображение в память процесса, т.е. не используется в других процессах.

Bit 57: Если установлен, это означает, что страница защищена от записи (write-protected) при использовании интерфейса "userfaultfd", который позволяет пользовательскому приложению отслеживать и обрабатывать ошибки страниц памяти.

Bits 58-60: Эти биты не используются и всегда имеют значение 0.

Bit 61: Если установлен, это означает, что страница была загружена из файла или используется как общий анонимный (shared-anon) ресурс между несколькими процессами.

Bit 62: Если установлен, это означает, что страница была перемещена в файл подкачки (swap).

Bit 63: Если установлен, это означает, что страница присутствует в физической памяти и доступна для использования. Если бит 63 сброшен, значит страница отсутствует в физической памяти и может быть перенесена на диск в файл подкачки


Что значит что область данных доступна для несколькоих процессов (exclusive mapped, soft-dirty):

Файлы загружаются в оперативную память при выполнении программы, когда происходит обращение к содержимому файла. Когда процесс открывает файл, операционная система загружает его содержимое в оперативную память, чтобы программа могла обращаться к нему непосредственно в памяти, без необходимости чтения данных с диска каждый раз при обращении.

Загрузка файла в оперативную память происходит по требованию, то есть только тогда, когда содержимое файла действительно требуется для выполнения программы. Когда программа обращается к определенной области памяти, которая содержит данные из файла, операционная система проверяет, были ли эти данные уже загружены в память. Если нет, операционная система загружает соответствующую часть файла в оперативную память и передает управление программе.

Загрузка файла в оперативную память происходит постранично. Операционная система использует механизм виртуальной памяти для отображения содержимого файла на физическую память компьютера. Когда программа обращается к определенной области памяти, которая не находится в оперативной памяти, операционная система загружает соответствующую страницу в память.

Таким образом, загрузка файла в оперативную память происходит по мере необходимости, чтобы обеспечить быстрый доступ к данным и оптимальное использование ресурсов памяти.



Один из таких флагов - "soft-dirty" - указывает на то, что содержимое страницы памяти было изменено, но не было сохранено на диск. Это означает, что если страница будет выгружена из физической памяти на диск (например, для освобождения памяти), то ее текущее содержимое будет утеряно.

Когда процесс выполняет операции с памятью, содержащейся в таких страницах, ядро операционной системы устанавливает бит "soft-dirty" для этих страниц, чтобы отметить, что содержимое было изменено. Когда процесс завершает работу, операционная система должна сохранить измененные страницы памяти на диск. Если это не произойдет, то изменения будут утеряны при перезагрузке системы или при выгрузке страницы из физической памяти.

Таким образом, бит "soft-dirty" в файле "pagemap" является важным инструментом для отслеживания изменений в страницах памяти процессов и контроля за сохранением этих изменений на диск.

В виртуальной памяти операционной системы, страница памяти может не находиться в единоличном использовании процесса и совместно использоваться с другими процессами в следующих случаях:

Общие библиотеки: Если несколько процессов используют одну и ту же библиотеку, то страницы памяти, содержащие код и данные этой библиотеки, будут разделяться между процессами.

Разделяемые объекты: Когда несколько процессов работают с одним и тем же объектом, например, разделяемой базой данных или файлом, то страницы памяти, содержащие данные этого объекта, будут разделяться между процессами.

Форки процессов: При создании нового процесса через вызов системной функции fork(), новый процесс будет использовать копию адресного пространства родительского процесса, включая страницы памяти, используемые родительским процессом. При этом, страницы памяти будут разделяться между процессами до тех пор, пока один из них не начнет изменять содержимое этих страниц.

Страницы "кэша": Операционная система может кэшировать страницы памяти, используемые процессами, для ускорения работы с ними. Эти страницы могут использоваться несколькими процессами, пока они находятся в кэше.



Работает механизм Copy-on-write
То есть при использовании разными процессами одного и того же адрессного пространства, они читают одинаковые страницы, но как только один из них захочет что-то изменить/записать в странице, он копирует себе эту страницу и уже изменяют её у себя локально.